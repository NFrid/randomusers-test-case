(this["webpackJsonprandomusers-test-case"]=this["webpackJsonprandomusers-test-case"]||[]).push([[0],{23:function(e,t,r){},42:function(e,t,r){},44:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(16),c=r.n(s),i=(r(23),r(2)),o=r(17),u=r.n(o),d={getUsers:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"us";return u()({method:"GET",url:"https://randomuser.me/api/?results=".concat(e,"&nat=").concat(t)}).then((function(e){return e.data.results}))}},l=(r(42),Object(n.createContext)({users:Array(),setUsers:function(e){},sortedUsers:Array(),setSortedUsers:function(e){},favoriteUsers:Array(),setFavoriteUsers:function(e){},loading:!0,setLoading:function(e){},dragToFav:!1,setDragToFav:function(e){}})),j=r(18),f=r(1),b=function(e){var t=e.user,r=e.highlight,a=e.append,s=Object(n.useState)(""),c=Object(i.a)(s,2),o=c[0],u=c[1];return Object(n.useEffect)((function(){var e="".concat(t.name.first," ").concat(t.name.last);u(r?e.replace(new RegExp(r,"i"),"<b>$&</b>"):e)}),[r,t]),Object(f.jsxs)("div",{className:"user-card",children:[Object(f.jsx)("img",{className:"photo",src:t.picture.medium,alt:""}),Object(f.jsxs)("div",{className:"credentials",children:[Object(f.jsxs)("div",{className:"credentials-top",children:[Object(f.jsx)("div",{className:"name",dangerouslySetInnerHTML:{__html:o}}),Object(f.jsx)("div",{className:"registration-date",children:new Date(t.registered.date).toLocaleDateString()})]}),Object(f.jsx)("div",{className:"credentials-bottom",children:Object(f.jsx)("div",{className:"email",children:t.email})})]}),a||""]})},O=function(e){var t=e.user,r=e.highlight,n=e.dragStartHandler,a=e.dragEndHandler;return Object(f.jsx)("div",{className:"sorted-user selectable",draggable:!0,onDragStart:n,onDragEnd:a,children:Object(f.jsx)(b,{user:t,highlight:r})})},v=function(e){var t=e.users,r=e.search,s=e.num,c=a.a.useRef(),o=Object(n.useContext)(l).setDragToFav,u=Object(n.useState)(t),d=Object(i.a)(u,2),b=d[0],v=d[1],g=Object(n.useState)(!1),h=Object(i.a)(g,2),m=h[0],p=h[1],x=Object(j.a)({size:b.length,estimateSize:a.a.useCallback((function(){return 88}),[]),parentRef:c});Object(n.useEffect)((function(){v(t.filter((function(e){return-1!=="".concat(e.name.first," ").concat(e.name.last).toLowerCase().indexOf(r.toLowerCase())})))}),[t,r,v]);return Object(f.jsxs)("div",{className:"users-group",children:[Object(f.jsxs)("h3",{className:"group-header "+(0===b.length?"disabled ":" ")+(m?"collapsed ":" "),onClick:function(){p(!m)},children:[10*s+1,"-",10*s+10]}),Object(f.jsx)("div",{className:m?"hideme":"",children:Object(f.jsx)("div",{className:"list-outer",ref:c,style:{maxHeight:"100vh",overflow:"auto"},children:Object(f.jsx)("div",{className:"list-inner",style:{height:"".concat(x.totalSize,"px"),width:"100%",position:"relative"},children:x.virtualItems.map((function(e){var n=b[e.index];return Object(f.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"".concat(e.size,"px"),transform:"translateY(".concat(e.start,"px)")},children:Object(f.jsx)(O,{user:n,highlight:r,dragStartHandler:function(e){return function(e,t,r){e.dataTransfer.setData("add-favorite",JSON.stringify([t,r])),o(!0)}(e,s,t.indexOf(n))},dragEndHandler:function(){o(!1)}},n.login.uuid)},e.index)}))})})})]})},g=function(){var e=Object(n.useRef)();Object(n.useEffect)((function(){document.addEventListener("keydown",(function(){return e.current.focus()}))}),[]);var t=Object(n.useContext)(l),r=t.loading,a=t.users,s=t.sortedUsers,c=t.setSortedUsers,o=Object(n.useState)(""),u=Object(i.a)(o,2),d=u[0],j=u[1];return Object(n.useEffect)((function(){c(function(e){var t=Array();return e.forEach((function(e){for(var r=0;e.registered.age>10*(r+1);r++);t[r]?t[r].push(e):t[r]=[e]})),t}(a))}),[a,c]),Object(f.jsxs)("div",{className:"sorted-users column",children:[Object(f.jsx)("input",{type:"text",ref:e,placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438 \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u0438...",onChange:function(e){j(e.target.value)}}),r?Object(f.jsx)("div",{className:"loader"}):s.map((function(e,t){return Object(f.jsx)(v,{users:e,search:d,num:t},t)}))]})},h=r(7),m=function(e){var t=e.user,r=e.removeHandler,n=e.dragStartHandler,a=e.dragEnterHandler,s=e.dragLeaveHandler,c=e.dragOverHandler,i=e.dropHandler;return Object(f.jsx)("div",{className:"favorite-user selectable",draggable:!0,onDragStart:n,onDragEnter:a,onDragLeave:s,onDragOver:c,onDrop:i,children:Object(f.jsx)(b,{user:t,append:Object(f.jsx)("button",{onClick:r,children:"X"})})})},p=function(){var e=Object(n.useContext)(l),t=e.dragToFav,r=e.sortedUsers,a=e.favoriteUsers,s=e.setFavoriteUsers,c=Object(n.useState)(0),o=Object(i.a)(c,2),u=o[0],d=o[1],j=function(e,t,r){var n=Object(h.a)(e),a=n.splice(t,1);return n.splice(r,0,a[0]),n},b=function(e){e.preventDefault(),e.stopPropagation()},O=function(e,t){e.preventDefault(),e.stopPropagation();var n=e.dataTransfer.getData("add-favorite");if(n){var c=JSON.parse(n);!function(e,t){a.includes(e)?s(j(a,a.indexOf(e),t)):s(j([].concat(Object(h.a)(a),[e]),a.length,t))}(r[c[0]][c[1]],t)}else s(j(a,u,t));e.currentTarget.classList.remove("selected")};return Object(f.jsxs)("div",{onDragOver:function(e){return b(e)},onDrop:function(e){return O(e,a.length)},className:"favorite-users column"+(t?" droppable":""),children:[Object(f.jsx)("h2",{children:"\u0418\u0417\u0411\u0420\u0410\u041d\u041d\u042b\u0415"}),a.map((function(e,t){return Object(f.jsx)(m,{user:e,removeHandler:function(){return function(e){s(a.filter((function(t){return t!==a[e]})))}(t)},dragStartHandler:function(){return function(e){d(e)}(t)},dragEnterHandler:function(e){return function(e){e.currentTarget.classList.add("selected")}(e)},dragLeaveHandler:function(e){return function(e){e.currentTarget.classList.remove("selected")}(e)},dragOverHandler:function(e){return b(e)},dropHandler:function(e){return O(e,t)}},t)}))]})};var x=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),r=t[0],a=t[1],s=Object(n.useState)([]),c=Object(i.a)(s,2),o=c[0],u=c[1],j=Object(n.useState)([]),b=Object(i.a)(j,2),O=b[0],v=b[1],h=Object(n.useState)(!0),m=Object(i.a)(h,2),x=m[0],S=m[1],N=Object(n.useState)(!1),D=Object(i.a)(N,2),H=D[0],U=D[1],E={users:r,setUsers:a,sortedUsers:o,setSortedUsers:u,favoriteUsers:O,setFavoriteUsers:v,loading:x,setLoading:S,dragToFav:H,setDragToFav:U};return Object(n.useEffect)((function(){d.getUsers(5e3).then((function(e){a(e),S(!1)}))}),[]),Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(l.Provider,{value:E,children:Object(f.jsxs)("div",{className:"users-ui",children:[Object(f.jsx)(g,{}),Object(f.jsx)(p,{})]})})})};c.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.35e047f3.chunk.js.map